<div class="profile-container">
  <div class="profile-header">
    <img src="/Project/public/profile-photo.jpg" alt="default user" class="profile-img" />
    <h2>üë§ –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–∏ –ø—Ä–æ—Ñ–∏–ª</h2>
  </div>

  <!-- READONLY MODE -->
  @if(!isEditMode){
    <div class="profile-info">
      <div class="info-row">
        <span class="label">–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª:</span>
        <span class="value">{{ profileDetails.username }}</span>
      </div>
      <div class="info-row">
        <span class="label">–ò–º–µ–π–ª:</span>
        <span class="value">{{ profileDetails.email }}</span>
      </div>
      <div class="info-row">
        <span class="label">–¢–µ–ª–µ—Ñ–æ–Ω:</span>
        <span class="value">{{ profileDetails.tel }}</span>
      </div>
      <div class="actions">
        <button class="btn edit-btn" (click)="toggleEditMode()">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–∞–π</button>
      </div>
    </div>
  } @else {
  <!-- EDIT MODE -->
    <form [formGroup]="form" (ngSubmit)="handleSaveProfile()" class="profile-form">
      <div class="form-group">
        <label for="username">–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª:</label>
        <input type="text" id="username" formControlName="username" placeholder="–í—ä–≤–µ–¥–µ—Ç–µ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–æ –∏–º–µ"/>
        @if(form.get('username')?.touched){
          <div class="error-box">
            @if(form.get('username')?.errors?.['required']){
              <p class="error">–ú–æ–ª—è, –≤—ä–≤–µ–¥–µ—Ç–µ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–æ –∏–º–µ!</p>
            }
            @if(form.get('username')?.errors?.['minlength']){
              <p class="error">–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–æ—Ç–æ –∏–º–µ —Ç—Ä—è–±–≤–∞ –¥–∞ –µ –ø–æ–Ω–µ 5 —Å–∏–º–≤–æ–ª–∞!</p>
            }
          </div>
        }
      </div>

      <div class="form-group">
        <label for="email">–ò–º–µ–π–ª:</label>
        <input type="email" id="email" formControlName="email" placeholder="–í—ä–≤–µ–¥–µ—Ç–µ –∏–º–µ–π–ª"/>
        @if(form.get('email')?.touched){
          <div class="error-box">
            @if(form.get('email')?.errors?.['required']){
              <p class="error">–ò–º–µ–π–ª—ä—Ç –µ –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–µ–Ω!</p>
            }
            @if(form.get('email')?.errors?.['emailValidator']){
              <p class="error">–ù–µ–≤–∞–ª–∏–¥–µ–Ω –∏–º–µ–π–ª!</p>
            }
          </div>
        }
      </div>

      <div class="form-group">
        <label for="tel">–¢–µ–ª–µ—Ñ–æ–Ω:</label>
        <div class="tel-input">
          <select id="select-tel" class="tel-select">
            <option value="00359">+359</option>
          </select>
          <input type="text" id="tel" formControlName="tel" placeholder="–í—ä–≤–µ–¥–µ—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω"/>
        </div>
      </div>

      <div class="actions">
        <button class="btn cancel-btn" (click)="onCancel($event)">‚ùå –û—Ç–∫–∞–∑</button>
        <button type="submit" class="btn save-btn" [disabled]="form.invalid">
          üíæ –ó–∞–ø–∞–∑–∏
        </button>
      </div>
    </form>
  }
</div>
