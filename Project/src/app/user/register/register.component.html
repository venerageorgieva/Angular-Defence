<div class="register-container">
  <form class="register-form" [formGroup]="form" (ngSubmit)="register()">
    <fieldset>
      <legend>Регистрация</legend>

      <!-- Потребителско име -->
      <div class="form-group">
        <label for="username">Потребителско име</label>
        <input
          type="text"
          id="username"
          formControlName="username"
          placeholder="Иван"
          [class.input-error]="isFieldTextMissing('username') || isNotMinLength"
        />
        <div class="error-box">
          <p class="error" *ngIf="form.get('username')?.errors?.['required'] && form.get('username')?.touched">
            Полето е задължително!
          </p>
          <p class="error" *ngIf="form.get('username')?.errors?.['minlength'] && form.get('username')?.touched">
            Минимална дължина 5 символа!
          </p>
        </div>
      </div>

      <!-- Имейл -->
      <div class="form-group">
        <label for="email">Имейл</label>
        <input
          type="email"
          id="email"
          formControlName="email"
          placeholder="ivan.ivanov@gmail.com"
          [class.input-error]="isFieldTextMissing('email') || isEmailNotValid"
        />
        <div class="error-box">
          <p class="error" *ngIf="form.get('email')?.errors?.['required'] && form.get('email')?.touched">
            Полето е задължително!
          </p>
          <p class="error" *ngIf="form.get('email')?.errors?.['emailValidator'] && form.get('email')?.touched">
            Невалиден имейл!
          </p>
        </div>
      </div>

      <!-- Телефон -->
      <div class="form-group">
        <label for="tel">Телефон</label>
        <div style="display: flex; gap: 5px;">
          <select id="select-tel" class="tel">
            <option value="00359">+359</option>
          </select>
          <input
            type="text"
            id="tel"
            formControlName="tel"
            placeholder="885 888 888"
          />
        </div>
      </div>

      <!-- Парола -->
      <div formGroupName="passGroup">
        <div class="form-group">
          <label for="password">Парола</label>
          <input
            type="password"
            id="password"
            formControlName="password"
            placeholder="******"
            [class.input-error]="
              (passGroup?.get('password')?.errors?.['required'] && passGroup?.get('password')?.touched) ||
              (passGroup?.get('password')?.errors?.['minlength'] && passGroup?.get('password')?.touched)
            "
          />
          <div class="error-box">
            <p class="error" *ngIf="passGroup?.get('password')?.errors?.['required'] && passGroup?.get('password')?.touched">
              Полето е задължително!
            </p>
            <p class="error" *ngIf="passGroup?.get('password')?.errors?.['minlength'] && passGroup?.get('password')?.touched">
              Минимална дължина 5 символа!
            </p>
          </div>
        </div>

        <!-- Потвърждение на парола -->
        <div class="form-group">
          <label for="rePassword">Повторете паролата</label>
          <input
            type="password"
            id="rePassword"
            formControlName="rePassword"
            placeholder="******"
            [class.input-error]="
              (passGroup?.get('rePassword')?.errors?.['required'] && passGroup?.get('rePassword')?.touched) ||
              (passGroup?.errors?.['matchPasswordsValidator'] && passGroup?.get('rePassword')?.touched)
            "
          />
          <div class="error-box">
            <p class="error" *ngIf="(passGroup?.errors?.['matchPasswordsValidator'] || passGroup?.get('rePassword')?.errors?.['required']) && passGroup?.get('rePassword')?.touched">
              Паролите не съвпадат!
            </p>
          </div>
        </div>
      </div>

      <!-- Бутон -->
      <div class="actions">
        <button class="btn register-btn" [disabled]="form.invalid">
          Създай акаунт
        </button>
      </div>

      <!-- Вход -->
      <div class="login-link">
        Вече имате акаунт? <a routerLink="/login">Вход</a>
      </div>
    </fieldset>
  </form>
</div>
